---
title: Context Hell - O pesadelo dos React Devs
wallpaper: '/articles/context.png'
description:
  Este artigo analisa os desafios da Context API no React, 
  abordando problemas como performance e legibilidade do c√≥digo. O artigo oferece insights para ajudar desenvolvedores a superar as complexidades e melhorar a gest√£o de estado em suas aplica√ß√µes.
date: 2024-09-30
tags: ['context-api','state-management','development','reactjs',"webdevelopment"]
---

Imagine que voc√™ est√° desenvolvendo uma aplica√ß√£o usando React que requer um monte de funcionalidades, como temas, autentica√ß√£o, idiomas, etc; voc√™ talvez decida usar [**Context API**](https://react.dev/learn/passing-data-deeply-with-context) para simplificar a comunica√ß√£o entre os componentes, o que √© uma √≥tima estrat√©gia. Pois usar Context API ajuda a evitar o "[**prop drilling**](https://www.freecodecamp.org/news/prop-drilling-in-react-explained-with-examples/)" (passar dados de um componente pai para um filho distante atrav√©s de v√°rios n√≠veis).

√Ä medida que sua aplica√ß√£o vai crescendo, voc√™ adiciona novos contextos. O que levar√° a uma estrutura parecida com essa daqui:

<Image
  className='w-full h-50'
  src='/articles/context.png'
  alt='Context Hell'
  width={600}
  height={600}
  priority
/>

Assustador, n√©? üò∂ Embora a imagem pare√ßa ser ‚Äúmeramente ilustrativa‚Äù, ela n√£o √© t√£o ‚Äúilustrativa‚Äù assim, pois √© um cen√°rio real. Pode n√£o parecer real, mas √©.

Segundo a imagem, a aplica√ß√£o est√° usando uma estrutura complexa de providers. O que implica dizer que cada provider adiciona uma nova camada de contexto, o que pode resultar em:

- **Re-renderiza√ß√µes desnecess√°rias:** as actualiza√ß√µes em um contexto causam re-renderiza√ß√µes em componentes n√£o afectados, prejudicando a performance.
- **Confus√£o no c√≥digo:** olhando para a imagem, parece bastante √≥bvio esse ponto. O c√≥digo torna-se menos leg√≠vel, mais dif√≠cil de manter e refatorar quando existem muitos contextos. O que pode vir a causar uma grande dificuldade em identificar quais contextos afetam quais componentes, pois as mudan√ßas em um contexto afetam outros contextos e componentes de forma inesperada.

Embora a Context API ofere√ßa uma solu√ß√£o elegante para compartilhar estados e fun√ß√µes globalmente, o uso inadequado pode levar ao temido e aclamado:

## Context Hell
Context Hell refere-se √† complexidade e confus√£o que podem surgir ao usar a Context API de forma excessiva.
Em alguns casos, isso pode tornar o sistema dif√≠cil de entender e manipular, o que n√£o difere de outros problemas em desenvolvimento de software, como:

- [Callback Hell](https://dev.to/trinitypath/entendendo-sobre-callback-hell-em-javascript-blh)
- [Dependency Hell](https://en.wikipedia.org/wiki/Dependency_hell)
- [Tutorial Hell](https://mariovarela99.medium.com/tutorial-hell-a-fase-do-copy-past-9ca9c7b92793) (devia estar no topo, pois √© aqui √© onde tudo come√ßa)

### Causas
1. Uso excessivo da Context API
2. Existem in√∫meras, mas iremos nos focar apenas no ponto 1.

### Solu√ß√µes

1. Dividir os contextos de forma que cada um tenha uma responsabilidade √∫nica e bem definida.
2. Use contextos apenas para dados que realmente precisam ser compartilhados globalmente.
3. Use hooks como `useMemo` e `useCallback` para otimizar componentes e evitar re-renderiza√ß√µes desnecess√°rias.
4. Utilize ferramentas para gerenciamento de estados como a [Zustand](https://github.com/pmndrs/zustand) e a [@bentoo/state-man](https://www.npmjs.com/package/@bentoo/state-man).

Talvez estejas se perguntando: **como identificar se o meu componente est√° sendo afectado pelo uso de contextos?**

Uma solu√ß√£o ideal seria usar a [React DevTools](https://react.dev/learn/react-developer-tools), que √© uma ferramenta de an√°lise de desempenho e monitoramento. Essa ferramenta pode te ajudar a visualizar quais componentes est√£o sendo re-renderizados e porqu√™.

### Conclus√£o
O **Context Hell** √© um desafio real que pode impactar a manuten√ß√£o e o desempenho da sua aplica√ß√£o. Mas √© poss√≠vel minimizar esses problemas usando uma abordagem cuidadosa, como:

- Modularizar contextos e garantir que cada um tenha uma responsabilidade clara e bem definida para evitar sobrecarga e confus√£o.
- Otimizar re-renderiza√ß√µes, usando alguns hooks como `useMemo` e `useCallback`.
- Usar alternativas ao Context API, como o [Zustand](https://github.com/pmndrs/zustand) e a [@bentoo/state-man](https://www.npmjs.com/package/@bentoo/state-man).

### Refer√™ncias

- [The React Context Hell](https://dev.to/alfredosalzillo/the-react-context-hell-7p4)
- [Navigating reacts - Context Hell](https://medium.com/@ambrosekibet576/navigating-reacts-context-hell-f6f4fe5dc23a)
- [ChatGPT](https://chatgpt.com/)